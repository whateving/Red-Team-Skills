# Understanding SMTP (Simple Mail Transfer Protocol)

## What Is SMTP?

**SMTP** stands for **Simple Mail Transfer Protocol**. It is the protocol responsible for **sending** emails.  
To fully support email communication, SMTP is paired with **POP** or **IMAP**, which handle **receiving** emails.

In short:

- **SMTP** → sends outgoing mail  
- **POP/IMAP** → retrieves incoming mail  

---

## What Does an SMTP Server Do?

An SMTP server has three main jobs:

1. **Check who is sending the email**  
2. **Send the message to the recipient’s mail server**  
3. **Return the email to the sender** if it cannot be delivered  

If you’ve ever set up an email client like Thunderbird or Outlook, you’ve likely seen SMTP settings—these are required for sending messages.

---

## POP vs IMAP

**POP (Post Office Protocol)** and **IMAP (Internet Message Access Protocol)** are used to retrieve emails from a mail server.

**POP:**
- Downloads emails from the server to your device  
- Usually removes them from the server afterward  
- Simple but does not sync between devices  

**IMAP:**
- Syncs your inbox with the mail server  
- Downloads only new or changed messages  
- Changes made on one device appear everywhere  

The POP/IMAP server handles delivering the inbox to the user.

---

## How Does SMTP Work?

You can think of email delivery like sending a physical letter:

- You write the message (email)  
- A postal system (SMTP) transports it  
- It eventually arrives at the recipient’s mailbox (inbox)  

SMTP acts like the **sorting office** that routes your message to the correct destination.

Here’s the simplified journey:

### 1. Email client connects to the SMTP server
Your email program connects to your provider’s SMTP server (e.g., `smtp.google.com`) over **port 25**.  
A handshake occurs, and an SMTP session begins.

### 2. The client sends message details
Your device sends:
- The sender’s email  
- The recipient’s email  
- The message body  
- Any attachments  

### 3. SMTP checks the domain
The server checks whether the sender and recipient share the same domain (e.g., both @gmail.com).

### 4. SMTP contacts the recipient’s server
If needed, the sender’s SMTP server connects to the **recipient’s SMTP server**.  
If the server is unavailable, the email is stored in an **SMTP queue** to retry later.

### 5. Recipient’s SMTP server validates the message
It verifies that:
- The domain exists  
- The user exists  

After validation, the email is passed to the recipient’s **POP/IMAP server** for mailbox delivery.

### 6. The email appears in the inbox
The email finally shows up for the recipient.

This is a simplified view—many additional checks and protocols happen behind the scenes.

